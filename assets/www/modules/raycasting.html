<div data-page="about" class="page">
  <div ontouchmove="return false;" class="navbar">
    <div class="navbar-inner">
      <div class="left"><a href="index.html" class="back link icon-only"><i class="icon icon-back"></i></a></div>
      <div class="center">Библиотека Raycasting</div>
	  <!--<div class="right"><a href="#" data-panel="right" class="link open-panel">#</a></div>-->
    </div>
  </div>
  <div class="page-content">
    <div class="content-block-title">Графические операторы в JsMobileBasic</div>
    <div class="content-block">
	  <!--pre>
	  <oper>clearRect<args>(x, y, w, h)</args></oper>
	  <info>Описание:</info>
	  <block>Очищает прямоугольную область, начиная от точки с координатой (x, y) px, шириной w px и высотой h px.</block>
	  <info>Параметры:</info>
	  <block>
		x, y: координаты левого верхнего угла очищаемой прямоугольной области, px;<br/>
	  	w: ширина очищаемой прямоугольной области;<br/>
	  	h: высота очищаемой прямоугольной области.<br/></block>
	  <info>Возвращаемое значение:</info> <block><orange>true</orange></block>
	  <info>Пример использования:</info>
	  <block>clearRect(0,0,100,100);</block>-->

<info>Данные:</info>

Для запуска библиотеки достаточно выполнить эту команду в хуке Main():

<block>Raycaster.run();</block> 

Или 

<block>Raycaster.run(640,480);</block>
для запуска с ограниченными размерами 

<info>Карта:</info>
Карта представляет из себя массив со значениями. <br/>
Она включает в себя только стены. <br/>

Пример карты 4х4: 
<block>
TestMap = [ <br/><block>
1,1,1,1, <br/>
1,0,0,1, <br/>
1,0,0,1, <br/>
1,1,1,1 <br/></block>
]; <br/></block>
Где 0 - пустое пространство, а 1 - стена с текстурой 1. <br/><br/>

Можно сделать и так: 
<block>
TestMap = [ <br/><block>
1,1,1,1, <br/>
3,0,0,2, <br/>
3,0,0,2, <br/>
1,1,1,1 <br/></block>
]; <br/>
</block>
Здесь уже используются стены с текстурами 1,2 и 3. Но об этом позже. 
<br/><br/>
Для подключения карты используеться оператор loadMap; <br/>
Он принимает 4 параметра:
<block>Raycasting.loadMap(map, name, width, height); </block>
<info>Параметры:</info><block>
map - массив нашей карты, 
name - название карты, например "Map01", 
width - ширина карты (количество значений в строке массива), у нас она 4, 
height - длина карты (количество строк в массиве), у нас она тоже 4 
</block>
<info>Загрузка карты:</info>
<block>
TestMap = [ <br/><block>
1,1,1,1, <br/>
1,0,0,1, <br/>
1,0,0,1, <br/>
1,1,1,1 <br/></block>
]; <br/>
Raycaster.loadMap(TestMap, 'Карта 1', 4, 4); </block>

<info>Текстуры:</info>

Пакет текстур тоже представляет из себя массив, а именно: <br/>

<block>Textures = ['', 'текстура1','текстура2','текстураN']; </block>

Первое значение ('') служит пустотой, остальные - текстурами стен. <br/><br/>

для загрузки текстур используйте оператор: 
<block>Raycasting.loadTextures(Textures); </block>

Допустим, у нас есть 2 текстуры: wall1.png и wall2.png, и нам нужно сделать карту 4х4 с этими текстурами.<br/>
Делаем: 
<block>
Map1 = [ <br/><block>
1,2,2,1, <br/>
1,0,0,1, <br/>
1,0,0,1, <br/>
1,1,1,1 <br/></block>
]; <br/>
Textures = ['','wall1.png','wall2.png']; <br/>
Raycaster.loadTextures(Textures); <br/>
</block>
<b>Готово!</b>

<info>Спрайты:</info>

Спрайты нужны для отображения объектов на карте. 
Они представляют из себя то же, что и текстуры, но не требуют значения '' в начале ;) 

<block>Sprites = ['barrel.png', 'car.jpg']; </block>

Для загрузки спрайтов - используйте: 

<block>Raycasting.loadSprites(Sprites); </block>

Всё очень просто) 

<info>Объекты:</info>

Вот мы и подошли к применению спрайтов! <br/>

Объект - это может быть предмет, или оружие на карте. <br/>

Пример создания объектов: 
<block>
Items = [ 
{ <block>
        name: "Бочка", <br/>
        texture: 0, <green>//у нас это barrel.png</green> <br/>
        x: 2, <green>//Расположение на карте</green> <br/>
        y: 2, <br/>
        size: 0.5 <green>//Размер</green> </block>
}, 
{ <block>
        name: "Машина", <br/>
        texture: 1, //у нас это car.jpg <br/>
        x: 2, <green>//Расположение на карте</green> <br/>
        y: 2, <br/>
        size: 1.0 <green>//Размер</green> </block>
} 
];</block> 

Подключение объектов происходит так: 
<block><coper>Raycasting</coper>.<carg>loadObjects</carg>(Items); </block>

<info>Управление:</info>
Вы, наверное, заметили, что не можете двигаться =D 

Для управления движением нужно задать клавиши;) 

Например: 

function onKeyDown(key){ //Это уже есть в файле 
        Raycasting.goFoward(1); //Включаем движение вперёд 
}; 

function onKeyUp(key){ 
        Raycasting.goFoward(0); //Выключаем движение вперёд 
}; 

Теперь, пока вы удерживаете любую клавишу на клавиатуре - идёте вперёд ;) 

Возможные действия: 
 Raycasting.goFoward - вперёд 
 Raycasting.goBack - назад 
 Raycasting.turnLeft - поворот влево 
 Raycasting.turnRight - поворот вправо 
 Raycasting.showMap - показать карту (должна быть текстура img/map.png) 
 Raycasting.hideMap - скрыть карту 
 Raycasting.fullScreen - во весь экран 

Для задания конкретных клавиш - используйте InKey ;)
		</div>
	</div>
</div>
